# AI 聊天助手开发计划


## 当前项目架构
技术栈
Vue 3 + TypeScript + Vite
状态管理：Pinia (已实现用户和主题状态)
UI 框架：Vant
样式：SCSS (包含主题切换系统)
工具库：marked, highlight.js等

## 最新开发任务 (2024-03-26)
1. ✨ 添加回车发送功能
2. 🎨 实现深色主题代码块
3. 💄 优化输入框样式和交互

## 开发时间记录

### Day 1 (2024-03-28)
- 09:00-10:30 左侧边栏布局实现
  - 实现基础布局结构
  - 添加折叠功能
  - 集成用户头像区域
- 10:30-12:00 历史记录列表组件
  - 实现时间分组
  - 添加对话项样式
  - 集成操作按钮
- 14:00-15:30 右侧主区域布局
  - 实现空白状态页面
  - 添加标题区域
  - 设计输入框基础样式
- 15:30-17:00 SVG 图标系统
  - 创建公共图标组件
  - 实现所需 SVG 图标
- 17:00-18:30 主题样式优化
  - 实现暗色主题
  - 优化颜色系统

### Day 2 (2024-03-29)
- 09:00-10:30 功能标签组件
  - 实现 8 个功能标签
  - 添加 SVG 图标
  - 优化标签样式
- 10:30-12:00 输入框组件优化
  - 实现自适应高度
  - 添加发送按钮
  - 优化输入体验
- 14:00-15:30 对话消息组件
  - 实现用户消息样式
  - 实现 AI 回复样式
  - 添加头像显示
- 15:30-17:00 消息列表优化
  - 实现消息间距
  - 添加时间显示
  - 优化滚动效果
- 17:00-18:30 交互动画
  - 添加消息加载动画
  - 优化过渡效果

### Day 3 (2024-03-23)
- 09:00-10:30 实现消息导出功能 ✅
- 10:30-12:00 添加会话搜索功能 ✅
- 14:00-15:30 实现虚拟滚动和性能优化 ✅
- 15:30-17:00 添加消息重试和错误处理 ✅
- 17:00-18:30 优化移动端交互和动画效果 ✅
- 18:30-20:00 添加消息动画和加载优化
- 17:00-18:30 优化移动端交互和动画效果

### Day 4 (2024-03-24)
- 09:00-10:30 实现骨架屏加载 ✅
- 10:30-12:00 优化性能和打包配置 ✅
- 14:00-15:30 添加错误边界和性能监控 ✅
- 15:30-17:00 优化网络请求和重试机制 ✅
- 17:00-18:30 实现消息搜索功能 ✅
- 18:30-20:00 添加快捷键和手势支持

### Day 5 (2024-03-25)
- 09:00-10:30 实现消息分享功能 ✅
- 10:30-12:00 添加消息统计分析 ✅
- 14:00-15:30 实现语音输入功能 ✅
- 15:30-17:00 添加 PDF 导出功能 ✅
- 17:00-18:30 优化用户体验和交互 ✅
- 18:30-20:00 实现消息引用和代码收藏 ✅

### Day 6 (2024-03-26)
- 09:00-10:30 实分享页面 ✅
- 10:30-12:00 完成代码片段管理页面 ✅
- 14:00-15:30 添加设置页面 ✅
- 15:30-17:00 优化输入框交互
  - 实现回车发送功能
  - 添加快捷键支持
  - 优化移动端键盘体验
- 17:00-18:30 深色主题适配
  - 代码块样式优化
  - 主题切换功能
  - 自动跟随系统主题

### Day 7 (2024-03-27) 计划
- 09:00-10:30 消息输入优化
  - 添加表情选择器
  - 实现@提醒功能
  - 支持快捷命令
- 10:30-12:00 键盘交互增强
  - 支持上下键切换历史消息
  - 添加常用快捷键
  - 实现命令面板
- 14:00-15:30 移动端优化
  - 优化触摸反馈
  - 添加手势操作
  - 完善键盘交互
- 15:30-17:00 性能优化
  - 消息列表虚拟滚动
  - 图片懒加载优化
  - 代码分割优化
- 17:00-18:30 体验优化
  - 添加操作提示
  - 优化加载动画
  - 完善错误提示

### Day 8 (2024-03-28) 文件上传功能
- 09:00-10:30 文件上传组件开发
  - 实现文件选择器
  - 添加拖拽上传区域
  - 文件类型验证
- 10:30-12:00 上传进度组件
  - 实现进度条显示
  - 添加取消上传功能
  - 错误处理机制
- 14:00-15:30 文件预览组件
  - 图片预览功能
  - 文档内容预览
  - 预览loading状态
- 15:30-17:00 消息组件优化
  - 支持显示上传文件
  - 优化文件展示样式
  - 添加文件操作按钮
- 17:00-18:30 集成测试和优化
  - 单元测试编写
  - 性能优化
  - 移动端适配

### Day 9 (2024-03-29) 文件处理集成
- 09:00-10:30 API 对接
  - 实现文件上传接口
  - 添加文件处理接口
  - 错误处理机制
- 10:30-12:00 状态管理优化
  - 更新 chat store
  - 添加文件处理状态
  - 优化状态同步
- 14:00-15:30 UI/UX 优化
  - 优化交互流程
  - 完善动画效果
  - 改进错误提示
- 15:30-17:00 文档更新
  - 更新技术文档
  - 添加使用说明
  - 完善注释

## 功能特性
- [x] 基础聊天功能
- [x] Markdown 渲染
- [x] 代码高亮
- [x] 消息引用
- [x] 代码片段收藏
- [x] 语音输入
- [x] PDF 导出
- [ ] 消息分享
- [ ] 设置管理
- [ ] 主题切换

新增功能:
- [x] 回车发送消息
- [x] 深色主题代码块
- [ ] 表情选择器
- [ ] @提醒功能
- [ ] 快捷命令支持
- [ ] 命令面板

## 项目进度

### 1. 已完成 ✅
- [x] 项目初始化与配置
- [x] Vite 配置优化
  - [x] 路径别名配置
  - [x] 样式预处理配置
  - [x] 构建优化配置
  - [x] 开发服务器配置
  - [x] Vant 组件自动导入
- [x] 状态管理 (chat store)
- [x] 基础组件开发
  - [x] 消息组件 (ChatMessage)
  - [x] 入组件 (ChatInput)
  - [x] 会话列表组件 (ConversationList)

### 2. 新完成 ✅
- [x] 回车发送功能
  - 支持 Enter 发送消息
  - 支持 Shift+Enter 换行
  - 优化输入框交互

### 3. 进行中 🚧
- [ ] 主视图组件 (ChatView)
- [ ] 响应式布局适配
- [ ] 错误处理和加载状态
- [ ] 消息历史加载
- [ ] 键盘快捷键支持
- [ ] 移动端键盘优化
- [ ] 表情选择器
- [ ] 命令面板实现

### 4. 待开发 📝
- [ ] 代码高亮
- [ ] Markdown 渲染
- [ ] 图片优化
- [ ] 打包优化

## 项目概述
基于 Vue 3 + TypeScript + Vite 开发的 AI 聊天助手，UI 和交互参考 ChatGPT 设计。

## 技术栈
- Vue 3 + TypeScript + Vite
- Vue Router
- Pinia
- SCSS
- Vant UI

## API 接口
### 会话管理
- POST /api/v1/context/conversations - 创建新会话
- GET /api/v1/context/conversations/{session_id} - 获取会话信息
- POST /api/v1/context/conversations/{session_id}/messages - 获取会话消息
- DELETE /api/v1/context/conversations/{session_id}/context - 清除会话上下文

### 聊天功能
- POST /api/v1/chat/{session_id} - 发送聊天消息

## 近期更新日志
### v0.2.1 (2024-03-26)
- ✨ 新增回车发送功能
- 🎨 优化代码块样式，支持深色主题
- 💄 改进输入框交互体验
- 🐛 修复移动端��盘弹出时的布局问题

### v0.2.0 (2024-03-25)
- ✨ 新增回车发送功能
- 🎨 优化代码块样式，支持深色主题
- 💄 改进输入框交互体验
- 🐛 修复移动端键盘弹出时的布局问题

# V1.2.0 知识手册功能开发计划

## 功能模块

### 1. 手册管理
- [ ] 创建、重命名、删除手册
- [ ] 手册分类管理
- [ ] 按分类浏览手册

### 2. 笔记管理
- [ ] 笔记的CRUD操作
- [ ] 标签系统支持
- [ ] 优先级管理
- [ ] 状态跟踪
- [ ] 复习次数统计
- [ ] 附件管理
- [ ] 笔记共享功能

### 3. 标签系统
- [ ] 标签的CRUD操作
- [ ] 最常用标签统计
- [ ] 标签搜索功能

### 4. 附件系统
- [ ] 附件上传
- [ ] 附件列表
- [ ] 附件删除

### 5. 搜索系统
- [ ] 关键词搜索
- [ ] 多维度筛选
- [ ] 日期范围筛选
- [ ] 排序功能
- [ ] 分页支持

## 开发步骤

1. 基础架构搭建
   - [ ] 创建必要的组件
   - [ ] 配置路由
   - [ ] 设置状态管理

2. API集成
   - [ ] 实现API接口调用
   - [ ] 错误处理
   - [ ] 数据缓存

3. UI开发
   - [ ] 手册列表页面
   - [ ] 笔记编辑页面
   - [ ] 标签管理界面
   - [ ] 搜索界面

4. 功能实现
   - [ ] 手册CRUD
   - [ ] 笔记CRUD
   - [ ] 标签系统
   - [ ] 附件管理
   - [ ] 搜索功能

5. 优化和测试
   - [ ] 性能优化
   - [ ] 单元测试
   - [ ] UI/UX优化
   
###  1. 现在进行v1.2.1 功能的开发  2024-12-01
1. AI聊天助手页面点击‘收录到笔记’按钮，可以对自己或者ai回答的message进行多条选择，有选择的条目之后，‘收录完成进行分析整理’按钮可以进行操作，点击‘收录完成进行分析整理’按钮，进入到一个新的分析整理的页面
2. 到达分析整理的页面，发送请求到后端，是个流式响应的接口， /api/v1/chat/analyze/stream/init  post,  参数是 {
  "messages": [
    {message对象}
  ],
  "system_prompt": "string"
} 
sse接口/api/v1/chat/analyze/stream
3. 后端处理完成之后，返回格式如下               onChunk(
                response.data.content, 
                response.data.section,
                fullText
              )， 
4. 等后端处理完成之后，出现下拉选择框，取消按钮，创建笔记按钮，取消按钮则返回ai聊天页面，创建笔记按钮则进入到创建笔记页面。把生成的title，content，messageIds，handbookId带创建笔记页面。
system_protmpt:
You are an AI assistant skilled in summarizing conversations. You will be provided with several dialogues between a user (who is a lifelong learner, student) and GPT. Your task is to extract the key insights and main ideas from each dialogue and provide a cohesive summary of all the conversations. Focus on identifying important concepts, any overarching themes, and key takeaways from the dialogues, while disregarding irrelevant or minor details. The summary should provide clarity and focus on the essence of the discussions, even if the viewpoints are diverse.
Please ensure that the summary reflects the intellectual depth and learning journey of the user, capturing how their thoughts have evolved over the course of the conversations. 
你是人工智能助手，擅长概括对话内容。你将获得几段用户（终身学习者）与 GPT 之间的对话。你的任务是从每个对话中提取关键见解和主要思想，并提供所有对话的连贯总结。重点在于识别重要概念、任何贯穿始终的主题以及对话的关键要点，同时忽略无关或次要的细节。总结应提供清晰度，并专注于讨论的本质，即使观点多样。
请确保摘要能够反映用户的思维深度和学习历程，捕捉他们在对话过程中思想的演变过程。



### V1.3.0 复习任务管理

2. 任务执行
  2.1 逐条复习： 用户逐条查看笔记内容，可以选择“标记为掌握”或“跳过”。
  2.2 快速复习模式： 支持快速复习功能（如闪卡模式），用户可以快速浏览标题并回忆内容，提升复习效率。
3. 任务记录与调整
  3.1 记录复习结果： 系统记录每条笔记的复习状态（完成时间、掌握状态）。
  3.2 智能调整任务： 未掌握或部分掌握的笔记会自动加入下一次复习计划，并适当提前复习时间。

  
## 功能特性
1. 复习计划管理
- 基于艾宾浩斯遗忘曲线的智能复习计划
- 支持按手册、分类、标签筛选复习内容
- 可自定义复习周期和优先级

2. 每日任务管理  
- 每日复习任务清单
- 任务进度跟踪
- 掌握程度评估
- 智能任务调整

## 开发计划

### 第一阶段: 基础架构
1. 创建复习相关的路由
2. 设计状态管理store
3. 封装API接口服务

### 第二阶段: 复习计划功能
1. 实现复习计划创建页面
2. 开发计划列表和详情页
3. 添加计划筛选和管理功能

### 第三阶段: 任务管理功能  
1. 开发每日任务清单
2. 实现任务执行和记录
3. 添加进度统计功能

### 第四阶段: 优化完善
1. 界面交互优化
2. 性能优化
3. 测试和Bug修复

## v1.3.2 开发计划

### 提醒机制与历史记录系统

#### 第一阶段：基础设施
1. [✓] 状态管理
   - [✓] 创建 notificationStore
   - [✓] 创建 historyStore
   - [✓] 创建 statisticsStore

2. [✓] 路由配置
   - [✓] 添加提醒设置路由
   - [✓] 添加每日摘要路由
   - [✓] 添加复习历史路由
   - [✓] 添加学习统计路由

3. [✓] 类型定义
   - [✓] 定义提醒相关类型
   - [✓] 定义历史记录类型
   - [✓] 定义统计数据类型

#### 第二阶段：提醒机制
1. [✓] 提醒设置页面
   - [✓] 时间设置组件
   - [✓] 提醒方式选择
   - [✓] 提醒频率设置
   - [✓] 保存设置功能

2. [✓] 每日摘要页面
   - [✓] 待复习内容展示
   - [✓] 学习进度展示
   - [✓] 建议内容展示
   - [✓] 快速复习入口

3. [✓] 通知系统
   - [✓] 系统通知实现
   - [✓] 摘要生成逻辑
   - [✓] 通知触发机制

#### 第三阶段：历史记录系统
1. [✓] 历史记录页面
   - [✓] 时间线展示
   - [✓] 掌握度标记
   - [✓] 复习记录查看
   - [✓] 统计图展示

2. [✓] 统计分析功能
   - [✓] 复习次数统计
   - [✓] 掌握度分析
   - [✓] 趋势图展示
   - [✓] 数据可视化

#### 第四阶段：系统优化
1. [ ] 性能优化
   - [ ] 数据缓存策略
   - [ ] 按需加载优化
   - [ ] 渲染性能优化

2. [ ] 用户体验优化
   - [ ] 交互动画
   - [ ] 加载状态
   - [ ] 错误处理


### 1.3.3 复习统计

## V1.3.3 学习统计功能开发计划

### 1. 基础架构搭建
- [✓] 创建统计相关的 store (src/stores/statistics.ts)
- [✓] 创建统计相关的 API 服务 (src/services/statistics.ts)
- [✓] 创建统计页面组件 (src/views/Statistics.vue)
- [✓] 配置路由

### 2. 组件开发
- [✓] 学习时长统计组件 (src/components/statistics/StudyTimeStats.vue)
  - 总学习时长展示
  - 日均学习时长
  - 周趋势图表
  - 学习高峰时段分析
  
- [✓] 知识点掌握统计组件 (src/components/statistics/MasteryStats.vue)
  - 知识点总览
  - 掌握进度环形图
  - 分类分布柱状图
  
- [✓] 复习计划统计组件 (src/components/statistics/RevisionStats.vue)
  - 复习完成率
  - 复习计划趋势图
  - 待复习项目列表
  
- [✓] 标签使用统计组件 (src/components/statistics/TagStats.vue)
  - 标签使用频率词云
  - 分类标签统计
  - 最近使用标签列表

### 3. 数据可视化实现
- [✓] 集成 ECharts 图表库
- [ ] 实现各类统计图表
  - [✓] 时间趋势折线图
  - [ ] 分类分布饼图
  - [ ] 标签词云图
  - [ ] 进度环形图

### 4. 交互优化
- [✓] 实现数据筛选功能
- [ ] 添加图表交互动效
- [ ] 适配移动端显示
- [ ] 支持分享统计数据

### 5. 性能优化
- [ ] 实现数据缓存
- [ ] 优化图表渲染性能
- [ ] 实现统计数据按需加载

### 6. 测试和部署
- [ ] 编写单元测试
- [ ] 进行性能测试
- [ ] 部署和监控

### 当前开发进度
1. ✅ 完成基础架构搭建
   - 创建了统计相关的 store
   - 实现了 API 服务
   - 配置了路由系统
   - 创建了主视图组件

2. ✅ 完成学习时长统计组件
   - 实现了统计数据卡片展示
   - 集成了 ECharts 图表库
   - 实现了时间范围筛选
   - 添加了周趋势和高峰时段图表

3. ✅ 完成知识点掌握统计组件
   - 实现了知识点总览卡片
   - 添加了掌握进度环形图
   - 实现了分类分布柱状图
   - 优化了移动端适配

4. ✅ 完成复习计划统计组件
   - 实现了复习计划统计卡片
   - 添加了复习趋势柱状图
   - 实现了完成率仪表盘
   - 添加了待复习项目列表